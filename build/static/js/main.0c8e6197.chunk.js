(this["webpackJsonpmonday-integration-quickstart-app"]=this["webpackJsonpmonday-integration-quickstart-app"]||[]).push([[0],{17:function(e,t,n){e.exports=n(40)},22:function(e,t,n){},23:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a,o,i=n(0),c=n.n(i),r=n(11),s=n.n(r),l=(n(22),n(12)),d=n(13),u=n(16),m=n(15),p=(n(23),n(14)),h=n.n(p),g=n(1),y=n.n(g),f=h()(),v=[],w=y.a.Engine,_=y.a.Render,b=y.a.World,x=y.a.Bodies,k=y.a.Events,I=y.a.MouseConstraint,E=y.a.Mouse,S=[],C=[getComputedStyle(document.documentElement).getPropertyValue("--particle_1"),getComputedStyle(document.documentElement).getPropertyValue("--particle_2"),getComputedStyle(document.documentElement).getPropertyValue("--particle_3"),getComputedStyle(document.documentElement).getPropertyValue("--particle_4")];function B(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var M=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).getContext=function(e){i.setState({context:e.data}),i.loadCompletedItems()},i.getSettings=function(e){isNaN(parseInt(e.data.countdown))||(console.log("Setting countdown to: "+parseInt(e.data.countdown)),i.setState({settings:{countdown:parseInt(e.data.countdown)}})),""!==e.data.completed_state&&(i.setState({settings:{completed_state:e.data.completed_state}}),i.loadCompletedItems())},i.loadCompletedItems=function(){for(var e in i.state.context.boardIds)f.api('query ($completedState: String!, $boardID: Int!) { items_by_column_values (board_id: $boardID, column_id: "status", column_value: $completedState) { name id } }',{variables:{completedState:i.state.settings.completed_state,boardID:i.state.context.boardIds[e]}}).then((function(e){for(var t in i.clearCrates(),e.data.items_by_column_values)i.createBox(e.data.items_by_column_values[t].name),v[v.length]=e.data.items_by_column_values[t].id;i.setState({info_text:v.length+" items ready to launch"})}))},i.setupMatterJS=function(){a=w.create(),o=_.create({element:i.refs.launch_site,engine:a,options:{wireframes:!1,background:"#fff",width:window.innerWidth,height:window.innerHeight-100}});var e=x.rectangle(window.innerWidth/2-250,window.innerHeight-100,window.innerWidth+500,20,{isStatic:!0,render:{fillStyle:"#fff"}}),t=E.create(o.canvas),n=I.create(a,{mouse:t,constraint:{stiffness:.2,render:{visible:!1}}});b.add(a.world,[e,n]),w.run(a),_.run(o),k.on(a,"tick",(function(){var e=t.position,n=y.a.Query.point(S,{x:e.x,y:e.y}),a=document.getElementById("hover_label");if(n.length>0){var o=n[0];a.innerHTML=o.label,a.style.top=o.position.y-1-a.clientHeight+"px",a.style.left=o.position.x-(a.clientWidth+1)/2+"px",a.style.opacity=1}else a.style.opacity=0}))},i.prepareLaunch=function(){0!==v.length?f.execute("confirm",{message:"Are you sure?\n This will launch all completed items off the earth's atmosphere to the archive!",confirmButton:"Launch!",cancelButton:"Cancel",excludeCancelButton:!1}).then((function(e){if(e.data.confirm){i.deleteCompleted(),i.clearCrates();var t=document.getElementById("launchButton");document.getElementById("rocketStationed").style.display="none",t.classList.add("countdown"),document.getElementById("rocket").style.display="block",i.setState({info_text:"Rocket launching in..."});var n=parseInt(i.state.settings.countdown);t.innerHTML=n;for(var a=1;a<=parseInt(i.state.settings.countdown);a++)setTimeout((function(){n--,t.innerHTML=n,t.classList.add("big"),setTimeout((function(){t.classList.remove("big")}),170),0===n&&i.launch()}),1e3*a)}})):f.execute("notice",{type:"error",message:"Rocket can't be launched without any items!",timeout:2e3})},i.launch=function(){var e=document.getElementById("rocket");e.style.animation="shake 0.3s 10",e.style.bottom=window.innerHeight+20+"px",document.getElementById("particleContainer").style.display="block";for(var t=function(e){setTimeout((function(){var t=window.innerWidth/2,n=window.innerHeight-e;i.createParticle(t,n)}),2.2*e)},n=0;n<1.2*window.innerHeight;n+=window.innerHeight/50)t(n);setTimeout((function(){f.execute("notice",{message:"Rocket successfully launched! Items are now archived!",type:"success",timeout:2e3}),setTimeout((function(){i.reset()}),1500)}),2e3)},i.reset=function(){i.loadCompletedItems();var e=document.getElementById("launchButton"),t=document.getElementById("rocket");e.classList.remove("countdown"),e.innerHTML="Launch now!",t.style.bottom="10%",t.style.display="none",t.style.animation="",document.getElementById("particleContainer").style.display="none",document.getElementById("rocketStationed").style.display="block",i.setState({info_text:"0 items ready to launch!"})},i.createParticle=function(e,t){var n=document.createElement("div");n.classList.add("particle");var a=5*(Math.random()+4),o=C[B(0,C.length-1)];n.style.width=a+"px",n.style.height=a+"px",n.style.borderRadius=a+"px",n.style.backgroundColor=o;var i=e+Math.ceil(150*Math.random())*(Math.round(Math.random())?1:-1),c=t+10*(Math.random()+15);document.getElementById("particleContainer").appendChild(n),n.animate([{transform:"translate(-50%, -50%) translate("+e+"px, "+t+"px) scale(1, 1)",opacity:1},{transform:"translate("+i+"px,"+c+"px) scale(2, 2)",opacity:1}],{duration:1e3*Math.random()+1e3,easing:"cubic-bezier(.05,.58,.33,1)",delay:200*Math.random()}).onfinish=function(){n.remove()}},i.deleteCompleted=function(){for(var e in v){var t=parseInt(v[e]);f.api("mutation ($itemID: Int) { archive_item (item_id: $itemID) { id } }",{variables:{itemID:t}})}},i.clearCrates=function(){for(var e in S)b.remove(a.world,S[e]);S=[],v=[]},i.state={info_text:"",button_text:"Launch Now!",settings:{completed_state:"Done",countdown:10}},i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.setupMatterJS(),f.listen("context",this.getContext),f.listen("settings",this.getSettings)}},{key:"render",value:function(){return c.a.createElement("div",{className:"App",ref:"launch_site"},c.a.createElement("div",{className:"button_container"},c.a.createElement("p",{className:"launch_title",id:"title"},this.state.info_text),c.a.createElement("button",{id:"launchButton",onClick:this.prepareLaunch,className:"launch_button"},this.state.button_text)),c.a.createElement("img",{src:"sprites/mocket.png",alt:"Rocket Stationed",id:"rocketStationed",className:"rocket_stationed"}),c.a.createElement("p",{id:"hover_label"},"Hover"),c.a.createElement("div",{className:"particle_container",id:"particleContainer"}),c.a.createElement("img",{alt:"Rocket",className:"rocket",id:"rocket",src:"sprites/mocket.png"}))}},{key:"createBox",value:function(e){var t=B(400,800),n=B(50,400),o=B(50,70),i=x.rectangle(t,n,o,o,{render:{sprite:{texture:"/sprites/crate.png",xScale:o/475,yScale:o/475}},label:e});b.add(a.world,[i]),S[S.length]=i}}]),n}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.0c8e6197.chunk.js.map